<!DOCTYPE html>
<html lang="en" class="background">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">

</head>
<header >
    
</header>

<body class="dashboard">
    <div class="main_page">

        <div class="heading">
            <h1 id="Welcome_Title">Today is </h1>
            <h1>Welcome Kyiem!</h1>
        </div>
        

        <!-- Bills Section -->
        <div id="bills">
            <div id="paycheck-input">
                <h2>Input monthly pay</h2>
                <input type="number" id="paycheck" pattern="[0-9]+([\.,][0-9]+)?" step="0.01">
            </div>
            <h2>Your bills:</h2>
            <div class="bill-display">
                <div class="needs">
                    <h2>Needs</h2>
                    <ol id="needed_bills"></ol>
                </div>
                <div class="wants">
                    <h2>Wants</h2>
                    <ol id="want_bills"></ol>
                </div>
            </div>

            
            <h2 id="bill_total">Bills Total: </h2>
            <button onclick="addBill()">Add bill</button>
            <button onclick="editBill()">Edit bill</button>
            <button onclick="removeBill()">Remove Bill</button>
        </div>
        <!-- End of Bills Section -->

        <!-- Start of Pie Chart Section -->
        <div id="chart">
            <center>
            <h2>Overview of Bills</h2>
            <div style="max-height:40vh">
                <canvas id="pie-chart"></canvas>
            </div>
            </center>
        </div>
        <!-- End of Pie Chart Section-->

        <!-- Start of Debt Payments Section -->
        <div id="debt-payments">
            <h1 id="debt-title">Pay off your debts!</h1>
            <p>This section is coming soon... </p>
        </div>
        <!-- Start of Debt Payments Section -->
    </div>


<!-- JavaScript Code below -->
<script defer>
    // Start of addDate function
    function addDate() {
        var time = new Date();
        var day = time.toLocaleDateString();
        console.log(day);
        document.getElementById("Welcome_Title").innerHTML += day;
    }
    // End of addDate function

    // Start of display_bills function
    function display_bills() {
        // Temp view for bills as of now
        console.log("Running Display bills function.")
        needed_bills = ["rent and utils", "car insurance", "phone", "Credit Cards", "Gas", "Groceries", "Personal Loan"];
        needed_costs = [766.23, 445.00, 50.00, 200.00, 150.00, 200, 147]

        want_bills = ["Amazon Prime", "Club4", "Crunch"];
        want_costs = [15.00, 27.50, 10.00]

        for (let index = 0; index < needed_bills.length; index++) {

            document.getElementById("needed_bills").innerHTML += "<li>" + needed_bills[index]+ ": "  + needed_costs[index] + "</li>";
            
        }

        for (let index = 0; index < want_bills.length; index++) {

            document.getElementById("want_bills").innerHTML += "<li>" + want_bills[index]+ ": "  + want_costs[index] + "</li>";

        }

        bill_costs = needed_costs.concat(want_costs)
        console.log(bill_costs)
        
        TotalOfBills(bill_costs);

        console.log("End of display bills function")
    }
    // End of display_bills function

    // Start of totalOfBills function
    function TotalOfBills(array) {
        console.log("Running Total of Bills function")

        var total = 0.00;

        for (let i = 0; i < array.length; i++) {
            total = total + array[i];
        }
        document.getElementById("bill_total").innerHTML += "$" + total;

        console.log("End of Total bills function")
    }
    // End of totalOfBills function

    // Start of AddBill function
    function addBill(){
        alert('Still working on "Add Bill" button')
    }
    // End of addBill function

    // Start of editBill function
    function editBill(){
        alert('Still working on "Edit Bill" button')
    }
    // End of addBill function

    // Start of removeBill function
    function removeBill() {
        alert('Still working on "Remove Bill" button')
    }
    // End of removeBill function
    
    //Start of SubBillsFromPay function
    function SubBillsFromPay() {
        check = document.getElementById("paycheck").value
        
    }
    // End of SubBillsFromPay function

//Call functions below on start of the page/ after HTML is loaded
addDate();
display_bills();


</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>

    var totalneed = 1760.23;
    var totalwant = 15 + 27.50 + 10.00;
    var totalsavings = 2800 - 1760.21 - 15;

const totals = [totalneed, totalwant, totalsavings];

console.log("totals: "  + totals)
 

// Pie Chart Example
    new Chart(document.getElementById('pie-chart'), {
      type: 'doughnut',
      data: {
        labels: ["Needs", "Wants", "Savings"],
        datasets: [{
          backgroundColor: ["#e63946", "#254BDD",
            "#ffbe0b" ],
          data: totals,
          
        }]
      },
      options: {
        title: {
          display: true,
          text: 'Overview of Bills'
        },
        responsive: false,
      }
    });
  </script>

<script src="database.js" defer></script>
<!--- End of JavaScript Code -->
</body>
</html>